<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- course_topic -->
<mapper namespace="com.zgh.onlinevideo.dao.CourseTopicDao">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="courseTopicMap" type="CourseTopic">
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="title" property="title" jdbcType="VARCHAR" />
        <result column="cover_url" property="coverUrl" jdbcType="VARCHAR" />
        <result column="intro" property="intro" jdbcType="VARCHAR" />
        <result column="intro_url" property="introUrl" jdbcType="VARCHAR" />
        <result column="views" property="views" jdbcType="INTEGER" />
        <result column="flag" property="flag" jdbcType="VARCHAR" />
        <result column="course_type_id" property="courseTypeId" jdbcType="INTEGER" />
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
        <result column="vip_flag" property="vipFlag" jdbcType="VARCHAR" />
        <result column="courseware_url" property="coursewareUrl" jdbcType="VARCHAR" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->
    
    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表查询字段 -->
    <sql id="allColumns">
        ct.id, ct.title, ct.cover_url, ct.intro, ct.intro_url, ct.views, ct.flag, ct.course_type_id, 
        ct.create_time, ct.vip_flag, ct.courseware_url
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->
    
    <!-- 查询所有数据 -->
    <select id="findCourseTopicAll" resultMap="courseTopicMap">
        SELECT
        <include refid="allColumns" />
        FROM course_topic ct
    </select>
    
    <!-- 根据条件参数查询数据列表 -->
    <select id="findCourseTopicByCondition" resultMap="courseTopicMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM course_topic ct WHERE 1 = 1
        <if test="title != null and title != ''">
            AND ct.title LIKE CONCAT('%', #{title}, '%')
        </if>
        <if test="coverUrl != null and coverUrl != ''">
            AND ct.cover_url LIKE CONCAT('%', #{coverUrl}, '%')
        </if>
        <if test="intro != null and intro != ''">
            AND ct.intro LIKE CONCAT('%', #{intro}, '%')
        </if>
        <if test="introUrl != null and introUrl != ''">
            AND ct.intro_url LIKE CONCAT('%', #{introUrl}, '%')
        </if>
        <if test="views != null">
            AND ct.views = #{views}
        </if>
        <if test="flag != null">
            AND ct.flag = #{flag}
        </if>
        <if test="courseTypeId != null">
            AND ct.course_type_id = #{courseTypeId}
        </if>
        <if test="createTime != null">
            AND ct.create_time = #{createTime}
        </if>
        <if test="vipFlag != null">
            AND ct.vip_flag = #{vipFlag}
        </if>
        <if test="coursewareUrl != null and coursewareUrl != ''">
            AND ct.courseware_url LIKE CONCAT('%', #{coursewareUrl}, '%')
        </if>
        <if test="order == 1">
            order by ct.create_time desc
        </if>
    </select>
    
    <!-- 根据主键查询数据 -->
    <select id="findCourseTopicByIds" resultMap="courseTopicMap" parameterType="list">
        SELECT
        <include refid="allColumns" />
        FROM course_topic ct WHERE ct.id IN
        <foreach collection="list" index="index" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </select>
    
    <!-- 插入数据 -->
    <insert id="insertCourseTopic" parameterType="courseTopic">
        INSERT INTO course_topic (
            id, title, cover_url, intro, intro_url, views, flag, course_type_id, 
            create_time, vip_flag, courseware_url
        ) VALUES (
            #{id},
            #{title},
            #{coverUrl},
            #{intro},
            #{introUrl},
            #{views},
            #{flag},
            #{courseTypeId},
            #{createTime},
            #{vipFlag},
            #{coursewareUrl}
        )
    </insert>
    
    <!-- 修改数据 -->
    <update id="updateCourseTopic" parameterType="map">
        UPDATE course_topic
        <set>
            <if test="title != null">
                title = #{title},
            </if>
            <if test="coverUrl != null">
                cover_url = #{coverUrl},
            </if>
            <if test="intro != null">
                intro = #{intro},
            </if>
            <if test="introUrl != null">
                intro_url = #{introUrl},
            </if>
            <if test="views != null">
                views = #{views},
            </if>
            <if test="flag != null">
                flag = #{flag},
            </if>
            <if test="courseTypeId != null">
                course_type_id = #{courseTypeId},
            </if>
            <if test="createTime != null">
                create_time = #{createTime},
            </if>
            <if test="vipFlag != null">
                vip_flag = #{vipFlag},
            </if>
            <if test="coursewareUrl != null">
                courseware_url = #{coursewareUrl}
            </if>
        </set>
        WHERE id = #{id}
    </update>
    
    <!-- 批量修改数据 -->
    <update id="updateCourseTopics" parameterType="list">
        <foreach collection="list" index="index" item="item" separator=";">
            UPDATE course_topic
            <set>
                <if test="item.title != null">
                    title = #{item.title},
                </if>
                <if test="item.coverUrl != null">
                    cover_url = #{item.coverUrl},
                </if>
                <if test="item.intro != null">
                    intro = #{item.intro},
                </if>
                <if test="item.introUrl != null">
                    intro_url = #{item.introUrl},
                </if>
                <if test="item.views != null">
                    views = #{item.views},
                </if>
                <if test="item.flag != null">
                    flag = #{item.flag},
                </if>
                <if test="item.courseTypeId != null">
                    course_type_id = #{item.courseTypeId},
                </if>
                <if test="item.createTime != null">
                    create_time = #{item.createTime},
                </if>
                <if test="item.vipFlag != null">
                    vip_flag = #{item.vipFlag},
                </if>
                <if test="item.coursewareUrl != null">
                    courseware_url = #{item.coursewareUrl}
                </if>
            </set>
            WHERE id = #{item.id}
        </foreach>
    </update>
    
    <!-- 根据主键删除数据 -->
    <delete id="deleteCourseTopicById" parameterType="int">
        DELETE FROM course_topic WHERE id = #{id}
    </delete>
    
    <!-- 根据主键批量删除数据 -->
    <delete id="deleteCourseTopicByIds" parameterType="list">
        DELETE FROM course_topic WHERE id IN
        <foreach collection="list" index="index" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>